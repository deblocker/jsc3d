var JSC3D=JSC3D||{}
JSC3D.BinaryStream=function(t,e){if(e)throw"JSC3D.BinaryStream constructor failed: Big endian is not supported yet!"
this.data=t,this.offset=0},JSC3D.BinaryStream.prototype.size=function(){return this.data.length},JSC3D.BinaryStream.prototype.tell=function(){return this.offset},JSC3D.BinaryStream.prototype.seek=function(t){return 0>t||t>=this.data.length?!1:(this.offset=t,!0)},JSC3D.BinaryStream.prototype.reset=function(){this.offset=0},JSC3D.BinaryStream.prototype.skip=function(t){this.offset+t>this.data.length?this.offset=this.data.length:this.offset+=t},JSC3D.BinaryStream.prototype.available=function(){return this.data.length-this.offset},JSC3D.BinaryStream.prototype.eof=function(){return!(this.offset<this.data.length)},JSC3D.BinaryStream.prototype.readUInt8=function(){return this.decodeInt(1,!1)},JSC3D.BinaryStream.prototype.readInt8=function(){return this.decodeInt(1,!0)},JSC3D.BinaryStream.prototype.readUInt16=function(){return this.decodeInt(2,!1)},JSC3D.BinaryStream.prototype.readInt16=function(){return this.decodeInt(2,!0)},JSC3D.BinaryStream.prototype.readUInt32=function(){return this.decodeInt(4,!1)},JSC3D.BinaryStream.prototype.readInt32=function(){return this.decodeInt(4,!0)},JSC3D.BinaryStream.prototype.readFloat32=function(){return this.decodeFloat(4,23)},JSC3D.BinaryStream.prototype.readFloat64=function(){return this.decodeFloat(8,52)},JSC3D.BinaryStream.prototype.readBytes=function(t,e){var r=e
this.offset+e>this.data.length&&(r=this.data.length-this.offset)
for(var a=0;r>a;a++)t[a]=255&this.data[this.offset++].charCodeAt(0)
return r},JSC3D.BinaryStream.prototype.decodeInt=function(t,e){if(this.offset+t>this.data.length)return this.offset=this.data.length,NaN
for(var r=0,a=1,o=0;t>o;o++)r+=(255&this.data[this.offset++].charCodeAt(0))*a,a*=256
return e&&r&Math.pow(2,8*t-1)&&(r-=Math.pow(2,8*t)),r},JSC3D.BinaryStream.prototype.decodeFloat=function(t,e){if(this.offset+t>this.data.length)return this.offset=this.data.length,NaN
var r=e,a=8*t-r-1,o=(1<<a)-1,n=o>>1,i=t-1,s=-1,f=255&this.data[this.offset+i].charCodeAt(0)
i+=s
var h=-7,d=f&(1<<-h)-1
for(f>>=-h,h+=a;h>0;)d=256*d+(255&this.data[this.offset+i].charCodeAt(0)),i+=s,h-=8
var p=d&(1<<-h)-1
for(d>>=-h,h+=r;h>0;)p=256*p+(255&this.data[this.offset+i].charCodeAt(0)),i+=s,h-=8
switch(this.offset+=t,d){case 0:d=1-n
break
case o:return p?NaN:(f?-1:1)*(1/0)
default:p+=Math.pow(2,r),d-=n}return(f?-1:1)*p*Math.pow(2,d-r)}